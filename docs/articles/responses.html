<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Responses • qsurvey</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/readable/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">qsurvey</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/design.html">Survey Designs</a>
</li>
<li>
  <a href="../articles/responses.html">Survey Responses</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="https://github.com/jamesdunham/qsurvey">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Responses</h1>
            
          </div>

    
    
<div class="contents">
<p>This vignette shows how to use qsurvey to download and work with responses collected with the Qualtrics survey platform. Before continuing you should have installed qsurvey; see the <a href="http://jdunham.io/qsurvey/">installation instructions</a>.</p>
<div id="retrieve-survey-responses" class="section level2">
<h2 class="hasAnchor">
<html><body><a href="#retrieve-survey-responses" class="anchor"> </a></body></html>Retrieve survey responses</h2>
<p>We’ll start by downloading the responses to a survey called “Demographics.”</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(survey_id &lt;-<span class="st"> </span><span class="kw"><a href="../reference/find_id.html">find_id</a></span>(<span class="st">"Demographics"</span>))
<span class="co">#&gt;         Demographics </span>
<span class="co">#&gt; "SV_0VVlb9QwJ4bsBKZ"</span></code></pre></div>
<p><code><a href="../reference/responses.html">responses()</a></code> sends a request to the Qualtrics API for our response data and waits while the survey platform prepares the export. After downloading it, <code><a href="../reference/responses.html">responses()</a></code> returns the data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demographics =<span class="st"> </span><span class="kw"><a href="../reference/responses.html">responses</a></span>(survey_id)
<span class="kw">class</span>(demographics)
<span class="co">#&gt; [1] "data.table" "data.frame"</span>
<span class="kw">dim</span>(demographics)
<span class="co">#&gt; [1] 100  54</span></code></pre></div>
<p>By default, <code><a href="../reference/responses.html">responses()</a></code> gives a table showing choice text or labels. This means that if the respondent-facing answer choices for a question are <code>"Low"</code>, <code>"Medium"</code>, and <code>"High"</code>, the response data will contain these strings. Alternatively, if argument <code>use_labels = FALSE</code>, the response data will show the choice ids <code>"1"</code>, <code>"2"</code>, and <code>"3"</code>, or if choice recodes have been configured, perhaps <code>"-1"</code>, <code>"0"</code>, and <code>"1"</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(demographics$Q23)
<span class="co">#&gt; [1] "Republican" "Democratic" "Republican" "Republican" ""          </span>
<span class="co">#&gt; [6] "Republican"</span>
demographics_nolabels =<span class="st"> </span><span class="kw"><a href="../reference/responses.html">responses</a></span>(survey_id, <span class="dt">use_labels =</span> <span class="ot">FALSE</span>)
<span class="kw">head</span>(demographics_nolabels$Q23)
<span class="co">#&gt; [1] "1" "2" "1" "1" ""  "1"</span></code></pre></div>
<p>As described in the documentation for <code>response()</code>, other <a href="https://api.qualtrics.com/docs/json">Qualtrics API parameters</a> that affect the format of survey responses are available. For example, passing argument seenUnansweredRecode = “99” to <code><a href="../reference/responses.html">responses()</a></code> will show <code>"99"</code> as the response to unanswered questions instead of <code>NA</code>, the default. See the <a href="https://api.qualtrics.com/docs/json">Qualtrics documentation</a> if you need to customize output from <code><a href="../reference/responses.html">responses()</a></code>.</p>
</div>
<div id="dropping-columns" class="section level2">
<h2 class="hasAnchor">
<html><body><a href="#dropping-columns" class="anchor"> </a></body></html>Dropping columns</h2>
<p>Let’s take a look at the columns in the response data. The first five are survey and respondent metadata. If they aren’t useful to us, we can drop them with the <code><a href="../reference/drop_sensitive.html">drop_meta()</a></code> function. We’re left with actual survey responses and the eight columns named <code>DO-*</code> that give question display orders.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(demographics)
<span class="co">#&gt;  [1] "ResponseID"            "ResponseSet"          </span>
<span class="co">#&gt;  [3] "IPAddress"             "StartDate"            </span>
<span class="co">#&gt;  [5] "EndDate"               "RecipientLastName"    </span>
<span class="co">#&gt;  [7] "RecipientFirstName"    "RecipientEmail"       </span>
<span class="co">#&gt;  [9] "ExternalDataReference" "Finished"             </span>
<span class="co">#&gt; [11] "Status"                "Q1"                   </span>
<span class="co">#&gt; [13] "Q2"                    "Q3"                   </span>
<span class="co">#&gt; [15] "Q4"                    "Q5_1"                 </span>
<span class="co">#&gt; [17] "Q5_2"                  "Q5_3"                 </span>
<span class="co">#&gt; [19] "Q5_4"                  "Q5_5"                 </span>
<span class="co">#&gt; [21] "Q5_6"                  "Q5_6_TEXT"            </span>
<span class="co">#&gt; [23] "Q6"                    "Q7"                   </span>
<span class="co">#&gt; [25] "Q8"                    "Q9"                   </span>
<span class="co">#&gt; [27] "Q11"                   "Q10"                  </span>
<span class="co">#&gt; [29] "Q12"                   "Q14"                  </span>
<span class="co">#&gt; [31] "Q13"                   "Q15"                  </span>
<span class="co">#&gt; [33] "Q15_TEXT"              "Q16"                  </span>
<span class="co">#&gt; [35] "Q17"                   "Q18"                  </span>
<span class="co">#&gt; [37] "Q19"                   "Q26"                  </span>
<span class="co">#&gt; [39] "Q20"                   "Q20_TEXT"             </span>
<span class="co">#&gt; [41] "Q21"                   "Q22"                  </span>
<span class="co">#&gt; [43] "Q23"                   "Q24_1"                </span>
<span class="co">#&gt; [45] "Q25"                   "Q25_TEXT"             </span>
<span class="co">#&gt; [47] "DO-Q-Q9"               "DO-Q-Q11"             </span>
<span class="co">#&gt; [49] "DO-Q-Q15"              "DO-Q-Q17"             </span>
<span class="co">#&gt; [51] "DO-Q-Q18"              "DO-Q-Q19"             </span>
<span class="co">#&gt; [53] "DO-Q-Q20"              "DO-Q-Q25"</span>
demographics &lt;-<span class="st"> </span><span class="kw"><a href="../reference/drop_sensitive.html">drop_meta</a></span>(demographics)
<span class="kw">names</span>(demographics)
<span class="co">#&gt;  [1] "Q1"        "Q2"        "Q3"        "Q4"        "Q5_1"     </span>
<span class="co">#&gt;  [6] "Q5_2"      "Q5_3"      "Q5_4"      "Q5_5"      "Q5_6"     </span>
<span class="co">#&gt; [11] "Q5_6_TEXT" "Q6"        "Q7"        "Q8"        "Q9"       </span>
<span class="co">#&gt; [16] "Q11"       "Q10"       "Q12"       "Q14"       "Q13"      </span>
<span class="co">#&gt; [21] "Q15"       "Q15_TEXT"  "Q16"       "Q17"       "Q18"      </span>
<span class="co">#&gt; [26] "Q19"       "Q26"       "Q20"       "Q20_TEXT"  "Q21"      </span>
<span class="co">#&gt; [31] "Q22"       "Q23"       "Q24_1"     "Q25"       "Q25_TEXT" </span>
<span class="co">#&gt; [36] "DO-Q-Q9"   "DO-Q-Q11"  "DO-Q-Q15"  "DO-Q-Q17"  "DO-Q-Q18" </span>
<span class="co">#&gt; [41] "DO-Q-Q19"  "DO-Q-Q20"  "DO-Q-Q25"</span></code></pre></div>
<p><code><a href="../reference/drop_sensitive.html">drop_sensitive()</a></code> and <code><a href="../reference/drop_sensitive.html">keep_questions()</a></code> are similar to <code><a href="../reference/drop_sensitive.html">drop_meta()</a></code>, but target different column ranges.</p>
</div>
<div id="renaming-variables" class="section level2">
<h2 class="hasAnchor">
<html><body><a href="#renaming-variables" class="anchor"> </a></body></html>Renaming variables</h2>
<p>By default, the response table’s variable names are the descriptive export names given to each question in the Qualtrics Control Panel. Let’s instead name them according to the unique identifiers of questions. We’ll need the survey’s design to access these; we pass it and the table of responses to <code><a href="../reference/ids_to_names.html">names_to_ids()</a></code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo_design &lt;-<span class="st"> </span><span class="kw"><a href="../reference/design.html">design</a></span>(survey_id)
demographics &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ids_to_names.html">names_to_ids</a></span>(demographics, demo_design)
<span class="kw">names</span>(demographics)
<span class="co">#&gt;  [1] "QID132224442" "QID132224453" "QID132224461" "QID132224462"</span>
<span class="co">#&gt;  [5] "QID132224463" "QID132224463" "QID132224463" "QID132224463"</span>
<span class="co">#&gt;  [9] "QID132224463" "QID132224463" "QID132224463" "QID132224464"</span>
<span class="co">#&gt; [13] "QID132224465" "QID132224466" "QID132224467" "QID132224444"</span>
<span class="co">#&gt; [17] "QID132224443" "QID132224445" "QID132224447" "QID132224446"</span>
<span class="co">#&gt; [21] "QID132224448" "QID132224448" "QID132224449" "QID132224450"</span>
<span class="co">#&gt; [25] "QID132224451" "QID132224452" "QID132224460" "QID132224454"</span>
<span class="co">#&gt; [29] "QID132224454" "QID132224455" "QID132224456" "QID132224457"</span>
<span class="co">#&gt; [33] "QID132224458" "QID132224459" "QID132224459" "DO-Q-Q9"     </span>
<span class="co">#&gt; [37] "DO-Q-Q11"     "DO-Q-Q15"     "DO-Q-Q17"     "DO-Q-Q18"    </span>
<span class="co">#&gt; [41] "DO-Q-Q19"     "DO-Q-Q20"     "DO-Q-Q25"</span></code></pre></div>
<p><code><a href="../reference/ids_to_names.html">ids_to_names()</a></code> does the reverse.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># FIXME: need to preserve suffixes for eg Q5_1, Q5_2   </span>
<span class="co"># demographics &lt;- ids_to_names(demographics, demo_design)</span>
<span class="co"># names(demographics)</span></code></pre></div>
</div>
<div id="conclusion" class="section level2">
<h2 class="hasAnchor">
<html><body><a href="#conclusion" class="anchor"> </a></body></html>Conclusion</h2>
<p>After downloading survey response data with <code><a href="../reference/responses.html">responses()</a></code>, two sets of convenience functions are available: one for dropping/keeping columns, and another for renaming columns. If you have a question or suggestion, please open a <a href="https://github.com/jamesdunham/qsurvey/issues">GitHub issue</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#retrieve-survey-responses">Retrieve survey responses</a></li>
      <li><a href="#dropping-columns">Dropping columns</a></li>
      <li><a href="#renaming-variables">Renaming variables</a></li>
      <li><a href="#conclusion">Conclusion</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="http://jdunham.io">James Dunham</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
